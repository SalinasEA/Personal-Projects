{"ast":null,"code":"import { Customer } from 'src/app/model/customer';\nimport { CustomerDto } from \"../../model/dto/customer-dto\";\nimport { CartDto } from \"../../model/dto/cart-dto.model\";\nimport { PurchaseDto } from \"../../model/dto/purchase-dto\";\nimport { StatusType } from \"../../model/StatusType\";\nimport { VacationDto } from \"../../model/dto/vacation-dto\";\nimport { CartItemDto } from \"../../model/dto/cart-item-dto\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/purchase-data.service\";\nexport let OrderConfirmationComponent = /*#__PURE__*/(() => {\n  class OrderConfirmationComponent {\n    constructor(http, route, purchaseDataService) {\n      this.http = http;\n      this.route = route;\n      this.purchaseDataService = purchaseDataService;\n      this.cartItemsUrl = \"\";\n      this.checkoutUrl = \"http://localhost:8080/api/checkout/purchase\";\n      this.customerUrl = \"http://localhost:8080/api/customers/1\";\n      this.cartsUrl = \"http://localhost:8080/api/carts\";\n      this.cartId = 0;\n      this.cartItems = [];\n      this.vacations = new Set();\n      this.customer = new Customer(0, \"\", \"\", \"\", \"\", \"\", 0);\n      this.orderTrackingNumber = \"\";\n      this.customerDto = new CustomerDto(0, \"\", \"\", \"\", \"\", \"\");\n    }\n\n    ngOnInit() {\n      // new purchase data service dto\n      this.purchaseDataService.purchaseServiceData.subscribe(serviceData => {\n        // console.log('Excursion Detail Current Data Service:', serviceData);\n        this.purchaseServiceDto = serviceData;\n      }); // get customer dto from data service\n\n      this.customerDto = this.purchaseServiceDto.getCustomer();\n      this.checkout();\n    }\n\n    ngOnDestroy() {\n      // reset the data service\n      let status = StatusType.pending;\n      let tempCustomer = new CustomerDto(0, \"\", \"\", \"\", \"\", \"\");\n      let tempVacation = new VacationDto(0, \"\", \"\", 0, \"\");\n      let tempCart = new CartDto(0, 0, 1, status, tempCustomer);\n      let tempExcursionList = [];\n      let tempCartItem = new CartItemDto(tempVacation, tempExcursionList);\n      let tempCartItemList = [];\n      let purchaseDataDto = new PurchaseDto(tempCustomer, tempCart, tempCartItemList);\n      this.purchaseDataService.setData(purchaseDataDto);\n    }\n\n    checkout() {\n      // convert data service object to plain old object for api call\n      let purchasePlain = Object.assign({}, this.purchaseServiceDto); // send request to back end\n\n      this.http.post(this.checkoutUrl, purchasePlain).subscribe(response => {\n        this.orderTrackingNumber = response.orderTrackingNumber;\n      });\n    }\n\n  }\n\n  OrderConfirmationComponent.ɵfac = function OrderConfirmationComponent_Factory(t) {\n    return new (t || OrderConfirmationComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.PurchaseDataService));\n  };\n\n  OrderConfirmationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderConfirmationComponent,\n    selectors: [[\"app-order-confirmation\"]],\n    decls: 17,\n    vars: 6,\n    consts: [[1, \"content\"], [1, \"customer-info-container\"]],\n    template: function OrderConfirmationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n        i0.ɵɵtext(3, \"Customer Information\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"p\");\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"p\");\n        i0.ɵɵtext(7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"p\");\n        i0.ɵɵtext(9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"p\");\n        i0.ɵɵtext(11);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 1)(13, \"h1\");\n        i0.ɵɵtext(14, \"Purchase Complete!\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"h2\");\n        i0.ɵɵtext(16);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate2(\"Name: \", ctx.customerDto.getFirstName(), \" \", ctx.customerDto.getLastName(), \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Address: \", ctx.customerDto.getAddress(), \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Postal Code: \", ctx.customerDto.getPostalCode(), \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"Phone: \", ctx.customerDto.getPhone(), \"\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"Order Tracking Number: \", ctx.orderTrackingNumber, \"\");\n      }\n    },\n    styles: [\".content[_ngcontent-%COMP%]{z-index:100;display:block;margin-top:20px;margin-left:32px;margin-right:20px;position:absolute;inset:0;align-items:center}.customer-info-container[_ngcontent-%COMP%]{margin:16px;right:0;background:#ECECEC;color:#000;border-radius:10px;padding:16px;text-align:center}.cart-items-container[_ngcontent-%COMP%]{margin:16px;right:0;left:0;background:#ECECEC;color:#000;border-radius:10px;padding:16px;text-align:left}.checkout-button-container[_ngcontent-%COMP%]{margin:16px;right:0;left:0;background:white;color:#000;border-radius:10px;padding:16px;text-align:center}.button-31[_ngcontent-%COMP%]{background-color:#222;border-radius:4px;border-style:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Farfetch Basis,Helvetica Neue,Arial,sans-serif;font-size:16px;font-weight:700;line-height:1.5;margin:0;max-width:none;min-height:44px;min-width:10px;outline:none;overflow:hidden;padding:9px 20px 8px;text-align:center;text-transform:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;width:10%}.button-31[_ngcontent-%COMP%]:hover, .button-31[_ngcontent-%COMP%]:focus{opacity:.75}li[_ngcontent-%COMP%]{margin:25px}\"]\n  });\n  return OrderConfirmationComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}