{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { map } from 'rxjs';\nimport { Vacation } from '../../model/vacation';\nimport { VacationDto } from \"../../model/dto/vacation-dto\";\nimport { CartItemDto } from \"../../model/dto/cart-item-dto\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/purchase-data.service\";\nimport * as i4 from \"@angular/common\";\n\nconst _c0 = function () {\n  return [\"/vacation\"];\n};\n\nconst _c1 = function (a1) {\n  return [\"/vacation\", a1, \"excursions\"];\n};\n\nexport let VacationDetailComponent = /*#__PURE__*/(() => {\n  class VacationDetailComponent {\n    constructor(http, route, purchaseDataService) {\n      this.http = http;\n      this.route = route;\n      this.purchaseDataService = purchaseDataService;\n      this.vacationUrl = 'http://localhost:8080/api/vacations';\n      this.vacation = new Vacation(\"\", \"\", 0, \"\", new Date(), new Date(), {\n        self: {\n          href: \"\"\n        }\n      });\n      this.vacationId = 0;\n    }\n\n    ngOnInit() {\n      // get data service\n      this.purchaseDataService.purchaseServiceData.subscribe(serviceData => {\n        this.purchaseServiceDto = serviceData;\n      });\n      this.vacationId = +this.route.snapshot.paramMap.get('vacationId');\n      this.getVacation(this.vacationId).subscribe(vacation => this.vacation = vacation);\n    }\n\n    getVacation(vacationId) {\n      return this.http.get(`${this.vacationUrl}/${vacationId}`).pipe(map(vacation => {\n        let parsedId = vacation._links.self.href.split(\"/\")[5];\n\n        vacation.id = parseInt(parsedId);\n        return vacation;\n      }));\n    }\n\n    ngOnDestroy() {\n      this.purchaseServiceDto.getCurrentCartItem().getVacation().setId(this.vacation.id);\n      this.purchaseServiceDto.getCurrentCartItem().getVacation().setVacationTitle(this.vacation.vacation_title);\n      this.purchaseServiceDto.getCurrentCartItem().getVacation().setDescription(this.vacation.description);\n      this.purchaseServiceDto.getCurrentCartItem().getVacation().setTravelPrice(this.vacation.travel_price);\n      this.purchaseServiceDto.getCurrentCartItem().getVacation().setImageUrl(this.vacation.image_URL);\n    }\n\n    ngAfterViewInit() {\n      // create and set vacation id for later use\n      let tempVacationDto = new VacationDto(0, \"\", \"\", 0, \"\");\n      tempVacationDto.setId(this.vacationId);\n      tempVacationDto.setVacationTitle(this.vacation.vacation_title);\n      tempVacationDto.setTravelPrice(this.vacation.travel_price); // new cart item\n\n      let tempCartItemDto = new CartItemDto(tempVacationDto, []); // set the vacation in the cart item\n\n      tempCartItemDto.setVacation(tempVacationDto);\n      this.purchaseServiceDto.addCartItem(tempCartItemDto);\n    }\n\n  }\n\n  VacationDetailComponent.ɵfac = function VacationDetailComponent_Factory(t) {\n    return new (t || VacationDetailComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.PurchaseDataService));\n  };\n\n  VacationDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: VacationDetailComponent,\n    selectors: [[\"app-vacation-detail\"]],\n    decls: 24,\n    vars: 12,\n    consts: [[1, \"content-detail\"], [1, \"button-31\", \"back-button\", 3, \"routerLink\"], [\"cellspacing\", \"0\"], [\"id\", \"vacation-image\", 3, \"src\"], [1, \"vacation-info-cell\"], [1, \"vacation-info-div\"], [1, \"vacation-title\"], [1, \"button-31\", \"select-excursions\", 3, \"routerLink\"]],\n    template: function VacationDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1)(2, \"a\");\n        i0.ɵɵtext(3, \"Back\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\")(5, \"table\", 2)(6, \"tr\")(7, \"td\");\n        i0.ɵɵelement(8, \"img\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"td\", 4)(10, \"div\", 5)(11, \"h2\", 6);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵtext(14);\n        i0.ɵɵpipe(15, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"button\", 7)(17, \"a\");\n        i0.ɵɵtext(18, \"Select Excursions\");\n        i0.ɵɵelementEnd()()()()()();\n        i0.ɵɵelement(19, \"hr\");\n        i0.ɵɵelementStart(20, \"h2\");\n        i0.ɵɵtext(21, \"Description\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"p\");\n        i0.ɵɵtext(23);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(9, _c0));\n        i0.ɵɵadvance(7);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.vacation.image_URL, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.vacation.vacation_title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(15, 6, ctx.vacation.travel_price, \"1.2-2\"), \"\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(10, _c1, ctx.vacation.id));\n        i0.ɵɵadvance(7);\n        i0.ɵɵtextInterpolate(ctx.vacation.description);\n      }\n    },\n    dependencies: [i2.RouterLink, i4.DecimalPipe],\n    styles: [\".content-detail[_ngcontent-%COMP%]{top:0;margin:25px;height:100%;width:1500px;display:inline-block}.back-button[_ngcontent-%COMP%]{width:100px!important}.vacation-title[_ngcontent-%COMP%]{font-size:1.3rem}.vacation-info-cell[_ngcontent-%COMP%]{display:initial;position:relative;top:0}.vacation-info-div[_ngcontent-%COMP%]{padding-left:25px}.button-31.select-excursions[_ngcontent-%COMP%]{margin-top:155%}#vacation-image[_ngcontent-%COMP%]{height:400px;width:400px;margin-top:25px;margin-bottom:25px}.button-31[_ngcontent-%COMP%]{background-color:#222;border-radius:4px;border-style:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Farfetch Basis,Helvetica Neue,Arial,sans-serif;font-size:16px;font-weight:700;line-height:1.5;margin:0;max-width:none;min-height:44px;min-width:10px;outline:none;overflow:hidden;padding:9px 20px 8px;position:relative;text-align:center;user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%}.button-31[_ngcontent-%COMP%]:hover, .button-31[_ngcontent-%COMP%]:focus{opacity:.75}\"]\n  });\n  return VacationDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}