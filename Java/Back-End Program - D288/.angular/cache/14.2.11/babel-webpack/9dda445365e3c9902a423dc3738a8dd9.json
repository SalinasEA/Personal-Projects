{"ast":null,"code":"import { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Excursion } from 'src/app/model/excursion';\nimport { Vacation } from \"../../model/vacation\";\nimport { ExcursionDto } from \"../../model/dto/excursion-dto\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../../services/purchase-data.service\";\nimport * as i4 from \"@angular/common\";\nexport let ExcursionDetailComponent = /*#__PURE__*/(() => {\n  class ExcursionDetailComponent {\n    constructor(http, route, router, purchaseDataService) {\n      this.http = http;\n      this.route = route;\n      this.router = router;\n      this.purchaseDataService = purchaseDataService;\n      this.vacationUrl = 'http://localhost:8080/api/vacations';\n      this.excursionsUrl = \"http://localhost:8080/api/excursions/\";\n      this.cartItemsUrl = 'http://localhost:8080/api/cartItems';\n      this.cartsUrl = \"http://localhost:8080/api/carts\";\n      this.cartUrl = '';\n      this.cartId = 0;\n      this.excursion = new Excursion(\"\", 0, \"\", new Date(), new Date(), {\n        self: {\n          href: \"\"\n        }\n      }, 0);\n      this.vacation = new Vacation(\"\", \"\", 0, \"\", new Date(), new Date(), {\n        self: {\n          href: \"\"\n        }\n      }, [], 0); // capture values for vacation\n\n      this.vacationId = 0;\n      this.excursionId = 0;\n    }\n\n    ngOnInit() {\n      this.purchaseDataService.purchaseServiceData.subscribe(serviceData => {\n        // console.log('Excursion Detail Current Data Service:', serviceData);\n        this.purchaseServiceDto = serviceData;\n      });\n      this.vacationId = +this.route.snapshot.paramMap.get('vacationId');\n      this.excursionId = +this.route.snapshot.paramMap.get('excursionId');\n      this.getExcursion(this.vacationId, this.excursionId).subscribe(excursion => this.excursion = excursion);\n      this.getVacation(this.vacationId).subscribe(vacation => this.vacation = vacation);\n    }\n\n    getCarts() {\n      return this.http.get(this.cartsUrl).pipe(map(response => response._embedded.carts));\n    }\n\n    getExcursion(vacationId, excursionId) {\n      return this.http.get(`${this.vacationUrl}/${vacationId}/excursions/${excursionId}`);\n    }\n\n    getVacation(vacationId) {\n      return this.http.get(`${this.vacationUrl}/${vacationId}`);\n    }\n\n    addToCart(excursionId, vacationId) {\n      // console.log(\"++++++++++++++++++++ ADD TO CART ++++++++++++++++++++\")\n      // add excursion to data service\n      this.addExcursionToDataService();\n      this.router.navigate(['/vacation', this.vacationId, 'excursions']);\n    }\n\n    addExcursionToDataService() {\n      let newExcursion = new ExcursionDto(0, \"\", 0, \"\");\n      newExcursion.setId(this.excursion.id);\n      newExcursion.setExcursionTitle(this.excursion.excursion_title);\n      newExcursion.setExcursionPrice(this.excursion.excursion_price);\n      newExcursion.setImageUrl(this.excursion.image_URL);\n      this.purchaseServiceDto.getCurrentCartItem().addExcursion(newExcursion);\n    }\n\n  }\n\n  ExcursionDetailComponent.ɵfac = function ExcursionDetailComponent_Factory(t) {\n    return new (t || ExcursionDetailComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.PurchaseDataService));\n  };\n\n  ExcursionDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ExcursionDetailComponent,\n    selectors: [[\"app-excursion-detail\"]],\n    decls: 33,\n    vars: 6,\n    consts: [[1, \"content-detail\"], [1, \"button-31\", \"back-button\"], [\"onclick\", \"history.back()\"], [\"cellspacing\", \"0\"], [\"id\", \"vacation-image\", 3, \"src\"], [1, \"vacation-info-cell\"], [1, \"vacation-info-div\"], [1, \"vacation-title\"], [\"id\", \"select-excursions-button\", 1, \"button-31\", 3, \"click\"]],\n    template: function ExcursionDetailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"button\", 1)(2, \"a\", 2);\n        i0.ɵɵtext(3, \"Back\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(4, \"div\")(5, \"table\", 3)(6, \"tr\")(7, \"td\");\n        i0.ɵɵelement(8, \"img\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"td\", 5)(10, \"div\", 6)(11, \"h2\", 7);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"p\");\n        i0.ɵɵtext(14);\n        i0.ɵɵpipe(15, \"number\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"br\")(17, \"br\")(18, \"br\")(19, \"br\")(20, \"br\")(21, \"br\")(22, \"br\")(23, \"br\")(24, \"br\")(25, \"br\")(26, \"br\")(27, \"br\")(28, \"br\")(29, \"br\");\n        i0.ɵɵelementStart(30, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function ExcursionDetailComponent_Template_button_click_30_listener() {\n          return ctx.addToCart(ctx.excursionId, ctx.vacationId);\n        });\n        i0.ɵɵelementStart(31, \"a\");\n        i0.ɵɵtext(32, \"Add Excursion\");\n        i0.ɵɵelementEnd()()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵpropertyInterpolate(\"src\", ctx.excursion.image_URL, i0.ɵɵsanitizeUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵtextInterpolate(ctx.excursion.excursion_title);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"$\", i0.ɵɵpipeBind2(15, 3, ctx.excursion.excursion_price, \"1.2-2\"), \"\");\n      }\n    },\n    dependencies: [i4.DecimalPipe],\n    styles: [\".content-detail[_ngcontent-%COMP%]{top:0;margin:25px;height:100%;width:1500px;display:inline-block}.back-button[_ngcontent-%COMP%]{width:100px!important}.vacation-title[_ngcontent-%COMP%]{font-size:1.3rem}.vacation-info-cell[_ngcontent-%COMP%]{display:initial;position:relative;top:0}.vacation-info-div[_ngcontent-%COMP%]{padding-left:25px}.select-excursions[_ngcontent-%COMP%]{position:relative;bottom:0}#vacation-image[_ngcontent-%COMP%]{height:400px;width:400px;margin-top:25px;margin-bottom:25px}.button-31[_ngcontent-%COMP%]{background-color:#222;border-radius:4px;border-style:none;box-sizing:border-box;color:#fff;cursor:pointer;display:inline-block;font-family:Farfetch Basis,Helvetica Neue,Arial,sans-serif;font-size:16px;font-weight:700;line-height:1.5;margin:0;max-width:none;min-height:44px;min-width:10px;outline:none;overflow:hidden;padding:9px 20px 8px;position:relative;text-align:center;text-transform:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;width:100%}.button-31[_ngcontent-%COMP%]:hover, .button-31[_ngcontent-%COMP%]:focus{opacity:.75}\"]\n  });\n  return ExcursionDetailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}